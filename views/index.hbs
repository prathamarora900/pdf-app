<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
      #upload {
    opacity: 0;
}

#upload-label {
    position: absolute;
    top: 50%;
    left: 1rem;
    transform: translateY(-50%);
}

.image-area {
    border: 2px dashed rgba(255, 255, 255, 0.7);
    padding: 1rem;
    position: relative;
}

.image-area::before {
    content: 'Uploaded image result';
    color: #fff;
    font-weight: bold;
    text-transform: uppercase;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 0.8rem;
    z-index: 1;
}

.image-area img {
    z-index: 2;
    position: relative;
}

/*
*
* ==========================================
* FOR DEMO PURPOSES
* ==========================================
*
*/
body {
    min-height: 100vh;
    background-color: black;
   
}


    </style>
    <script src='main.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src=""></script>
</head>

<body>
  <!--
<input type="file" name="file" multiple>

  </form>-->
  

<div class="container py-5">

    <!-- For demo purpose -->
    <header class="text-white text-center">
        <h1 class="display-4">Converter APP</h1>
        <p class="lead mb-0">Build a simple image converter that convert images to pdf</p>
        <p class="mb-5 font-weight-light">Created by Pratham 
        </p>
        <img src="https://res.cloudinary.com/mhmd/image/upload/v1564991372/image_pxlho1.svg" alt="" width="150" class="mb-4">
    </header>


    <div class="row py-4">
        <div class="col-lg-6 mx-auto">

            <!-- Upload image input-->
            <form  method="POST" action="/upload" enctype="multipart/form-data">
            <div class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm">
               <!-- <input id="upload" type="file" onchange="readURL(this);" class="form-control border-0" multiple>
              
              -->
              
               <input id="upload" type="file" name="file" accept="image/png, image/jpeg"  class="form-control border-0"  multiple >  
               <label id="upload-label" for="upload" class="font-weight-light text-muted">Choose file</label>
                <div class="input-group-append">
                    <label for="upload" class="btn btn-light m-0 rounded-pill px-4">
                         <i class="fa fa-cloud-upload mr-2 text-muted"></i><small class="text-uppercase font-weight-bold text-muted">Choose file</small></label>
                </div>
            </div>
           

            <!-- Uploaded image area-->
            <p class="font-italic text-white text-center" >The image uploaded will be rendered inside the box below.</p>
            <div class="image-area mt-4" id="image-heading" style="    border: 2px dashed rgba(255, 255, 255, 0.7);
    /* padding: 1rem; */
    position: relative;
    width: 525px;
    height: 31px;" >
                <div id="image_results" style="height: 100%;
    background: currentColor;    height: 34px;
    width: 0px;
    background: currentColor;
    margin-top: -17px;
    margin-left: -15px;">

                </div>
               </div>
            <!--dashed border-->


            <button id="but" style="margin-left: 42%;
    margin-top: 3%; display:none;" type="submit"  >Submit</button>
            </form>
        </div>
         
    </div>
    
</div>

</body>
</html>
<script>
    const image_heading=document.getElementById("image-heading");
  /*function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#imageResult')
                .attr('src', e.target.result);
        };
        reader.readAsDataURL(input.files[0]);
    }
}

$(function () {
    $('#upload').on('change', function () {
        readURL(input);
    });
});

/*  ==========================================
    SHOW UPLOADED IMAGE NAME
* ========================================== */
/*var input = document.getElementById( 'upload' );
var infoArea = document.getElementById( 'upload-label' );

input.addEventListener( 'change', showFileName );
*/


const but=document.getElementById("but");
const imageResult=document.getElementById("image_results");
const upload=document.getElementById("upload-label");
const up=document.getElementById("upload");
let  activate=false;
up.addEventListener("change",ram);
up.addEventListener("click",df);
 function ram(){
     imageResult.style.width=0+"%";
    but.style.display="none";
    //console.log("gga");

    let length=up.files.length;
    console.log(length);
document.cookie=`total_files=${length}`;
    upload.innerHTML="uploaded";

    activate=true;
   // console.log(activate);
}
let per=0;
let clicks=0;

    




const calling=()=>{
   
per=per+106.5;
if(per<=106.5){
    
imageResult.style.width=per+"%";
per++;}
else{
 activate=false;   
 //console.log("okay");
 but.style.display="block";
 
     removeEventListener("change",ram);

}
//console.log(activate);
}
const checker=()=>{
if(activate==true){
setInterval(calling,90);
}

}
setInterval(checker,500);
 let total_clicks=0;
 function df(){
    total_clicks++;
    if(total_clicks>1){
        alert("____");
        location.reload();
   
    }
 }
</script>